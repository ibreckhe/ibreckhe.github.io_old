---
layout: post
title: "Adding Rich R Content"
date: 2014-07-18 07:00:00
comments: true
categories: [HelloWorld]
published: true
status: process
---

With a bit of tweaking, you can create rich documents with R markdown that combine text, figures, equations and tables that are generated by R on the fly. Now if only blogs could get a DOI...
  
```{r include=FALSE}

##To change to html output:
##reduce dpi to 96
##Change fig.cap argument to html.cap

##To change to word output.
##remove toc option in header

#Loads required packages
require(knitcitations)
require(extrafont)
require(pander)
require(knitr)
require(png)
require(grid)

#Sets options for citations
# cite_options(tooltip = TRUE, linked = TRUE, numerical = FALSE,
#              bibtex_data = FALSE)

#Hook for html captions.
knit_hooks$set(html.cap = function(before, options, envir) {
  if(!before) {
    paste('<i>',options$html.cap,"</i>",sep="")
  }
})
```

<!-- more -->

**Tables:**

Tables can be used with the knitr::kable function.
```{r, echo=FALSE, results='asis',caption: "Another Caption"}
knitr::kable(mtcars[1:5,],format='html',align='c')
```

**Math**

Equations are handled in LATEX format by MathJax:
$$\frac{1}{n} \sum_{i=i}^{n} x_{i}$$

**Embedded Images:**

Links to websites can be included [like this](http://www.google.com).

Embedding images with control over the size and resolution is a bit tricky. I like to import my PNG images as R objects, that way they are treated like any other plot.

```{r echo=FALSE,cache=FALSE,fig.width=3,fig.height=3,fig.cap="This is also a caption.",fig.align="center"}
img <- readPNG(system.file("img", "Rlogo.png", package="png"))
grid.raster(img)
```

**Citations:**

It is also straightforward to include inline citations like this using the package `knitcitations` package `r citep(c("10.1890/11-0011.1","10.1098/rspb.2010.0018"),linked=TRUE)`.

And include a dynamically generated list of references:

**Works Cited:**
```{r results='asis',echo=FALSE}
bibliography()
```


*Source code for this document is available [here](https://github.com/ibreckhe/code/blob/master/report_template.Rmd)*
